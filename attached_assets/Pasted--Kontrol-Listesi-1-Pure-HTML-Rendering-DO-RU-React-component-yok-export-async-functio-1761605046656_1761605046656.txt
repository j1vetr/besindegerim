✅ Kontrol Listesi
1️⃣ Pure HTML Rendering ✅
// ✅ DOĞRU - React component yok
export async function renderHomePage(): Promise<RenderResult> {
  const html = `<div>...</div>`;
  return { html, statusCode: 200 };
}
// ❌ YANLIŞ olurdu
const html = renderComponentToHTML(<HomePage />); // Bu production'da çalışmaz
2️⃣ REPLACE Strategy Meta Injection ✅
// ✅ DOĞRU - Mevcut meta tag'leri replace et
result = result.replace(/<title>.*?<\/title>/, `<title>${meta.title}</title>`);
// ❌ YANLIŞ olurdu
result += `<title>${meta.title}</title>`; // Duplicate olur
client/index.html placeholder'lar da önemli:

<!-- Placeholder'lar (SSR replace edecek) -->
<title>Loading...</title>
<meta name="description" content="Loading..." />
<meta property="og:title" content="Loading..." />
3️⃣ Middleware Sıralaması ✅
Development:

// ✅ DOĞRU sıralama
if (app.get("env") === "development") {
  app.use("*", async (req, res, next) => {
    if (isCrawler) return await renderHTMLWithMeta(...);
    next(); // ← Vite'a geç
  });
  await setupVite(app, server); // ← Vite en sonda
}
Production:

// ✅ DOĞRU sıralama
else {
  app.use(express.static(distPath)); // ← Static files önce
  app.use("*", async (req, res) => {  // ← SSR catch-all sonra
    await renderHTMLWithMeta(...);
  });
}
4️⃣ Bot Detection ✅
// ✅ DOĞRU - Dev'de bot detection
const crawlers = ['Googlebot', 'Bingbot', 'Slurp', ...];
const isCrawler = crawlers.some(crawler => 
  userAgent.toLowerCase().includes(crawler.toLowerCase())
);
if (isCrawler) {
  return await renderHTMLWithMeta(...); // ← SSR
}
next(); // ← Normal kullanıcı → Vite SPA
5️⃣ No Duplicate Meta Tags ✅
// ✅ REPLACE strategy sayesinde duplicate yok
// Eski: <title>Loading...</title>
// Yeni: <title>Product Name | Site</title>
// Sonuç: 1 tane title tag (duplicate yok)
🎯 Kritik Test Noktaları (Agent'a Söyle)
Agent'ın yapması gereken testler:

1. Production'da Çalışıyor mu?
# Sunucuda
NODE_ENV=production npm run build
NODE_ENV=production npm start
# Test et
curl https://site.com/product/test
Beklenen: HTML dönmeli (500 error yok)

2. Meta Tag'ler Doğru mu?
# Bot olarak test et
curl -A "Googlebot" https://site.com/product/test | grep "og:title"
Beklenen:

<meta property="og:title" content="Product Name | Site" />
OLMAMASI GEREKEN (duplicate):

<meta property="og:title" content="Loading..." />
<meta property="og:title" content="Product Name | Site" />
3. Client-Side Routing Bozulmadı mı?
# Normal kullanıcı olarak
curl https://site.com/product/test
Beklenen:

Dev'de: Vite SPA (React routing çalışıyor)
Prod'da: SSR HTML (ama React hydrate edebilir)
4. Static Files Serve Ediliyor mu?
curl https://site.com/assets/index.js
Beklenen: JS dosyası dönmeli (SSR'a gitmemeli)